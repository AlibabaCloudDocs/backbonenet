# 流日志 {#concept_778527 .concept}

云企业网提供流日志功能，可以捕获加载到云企业网内不同地域的网络实例间的流量信息。开启流日志功能后，您可以根据捕获的流量信息分析跨地域业务流量、优化使用成本和排查网络故障。

**说明：** 目前，仅华东1（杭州）、华东 2（上海）、华南 1（深圳）、华北2（北京）、华北5（呼和浩特）、香港、英国（伦敦）、美国（硅谷）和美国（弗吉尼亚\) 地域支持流日志功能。

## 功能概述 {#section_fum_lzt_xlp .section}

您可以通过流日志功能，捕获加载到云企业网内不同地域的网络实例间的五元组流量日志，包括源IP、目的IP、源端口、目的端口、协议等信息。

通过流日志捕获到的流量信息存储在阿里云日志服务中，您可以在日志服务中查看和分析相关数据。流日志功能测试期间暂不收取费用，日志服务将收取相应的存储和检索费用。详细信息，请参见[日志服务定价](../../../../cn.zh-CN/产品定价/计费方式.md#)。

流日志功能捕获的流量信息会以流日志记录的方式写入日志服务中。每条流日志记录会捕获特定捕获窗口中的特定五元组网络流，捕获窗口大约为10分钟，该段时间内流日志服务会先聚合数据，然后再发布流日志记录。

流日志记录的字段信息如下表所示。

|字段|说明|
|--|--|
|account-id|账号ID|
|cen-id|云企业网实例D|
|srcaddr|源地址|
|srcport|源端口|
|dstaddr|目的地址|
|dstport|目的端口|
|protocol|协议类型|
|direction|流量方向： -   in：入方向流量
-   out：出方向流量

 |
|packets|数据包数量|
|bytes|数据包大小|
|rtt|时延时间|
|start|捕捉窗口开始时间|
|end|捕捉窗口结束时间|
|log-status|流日志的日志记录状态： -   OK：数据记录正常
-   NODATA：捕获窗口中没有传入或传出的网络流量
-   SKIPDATA：捕获窗口中跳过了一些流日志记录

 |

## 配置流程 {#section_e65_aa0_cod .section}

配置流日志的流程如下：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/630431/156138043250102_zh-CN.png)

1.  开通日志服务

    通过流日志功能捕获到的流量信息存储在阿里云日志服务中。创建流日志前，您需要在日志服务产品页开通日志服务。

2.  （可选）创建密钥对

    如果您需要通过API/SDK写入数据，请创建密钥对；如果您通过Logtail采集日志，则不需要创建密钥对。

3.  创建Project

    您需要为日志服务创建一个Project。详细信息，请参见[创建Project](../../../../cn.zh-CN/用户指南/准备工作/操作Project.md#section_ahq_ggx_ndb)。

4.  创建Logstore

    Logstore是Project的资源集合，Logstore中的所有数据都来自于同一个数据源。创建Project后，您需要创建Logstore。详细信息，请参见[创建Logstore](../../../../cn.zh-CN/用户指南/准备工作/操作Logstore.md#section_v52_2jx_ndb)。

5.  创建流日志

    流日志可以捕获加载到云企业网内不同地域的网络实例间的流量信息，您可以通过调用CreateFlowlog接口创建流日志。详细信息，请参见[CreateFlowlog](../../../../cn.zh-CN/API参考/流日志/CreateFlowlog.md#)。

6.  启动流日志

    启动流日志功能后开始捕获指定资源的流量。您可以通过调用ActiveFlowLog接口启动流日志。详细信息，请参见[ActiveFlowLog](../../../../cn.zh-CN/API参考/流日志/ActiveFlowLog.md#)。


## 相关API {#section_lcg_zro_dvx .section}

您可以使用以下API配置流日志。

|API|说明|
|---|--|
|[CreateFlowlog](../../../../cn.zh-CN/API参考/流日志/CreateFlowlog.md#)|创建流日志|
|[ModifyFlowLogAttribute](../../../../cn.zh-CN/API参考/流日志/ModifyFlowLogAttribute.md#)|修改流日志|
|[DescribeFlowlogs](../../../../cn.zh-CN/API参考/流日志/DescribeFlowlogs.md#)|查询流日志|
|[ActiveFlowLog](../../../../cn.zh-CN/API参考/流日志/ActiveFlowLog.md#)|启动流日志|
|[DeactiveFlowLog](../../../../cn.zh-CN/API参考/流日志/DeactiveFlowLog.md#)|停止流日志|
|[DeleteFlowlog](../../../../cn.zh-CN/API参考/流日志/DeleteFlowlog.md#)|删除流日志|

